import { TestHelperFunctions, stageParams } from './helperFunctions.spec';

describe('TournamentCreator', () => { 
  it('should create a group stage with 4 groups and 2 legs', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 4,    
        nrParticipants: 16,
        stageType: "GROUP",
        legs: 2,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 1;
  
    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, true);
    let result = {"id":0,"name":"Test tournament","stageConfigs":[{"id":0,"matches":[{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":0,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":1,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":2,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":3,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":4,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":5,"opponents":[{"token":"00aC3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":6,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":7,"opponents":[{"token":"00aD3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":8,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":9,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":10,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":11,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":12,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":13,"opponents":[{"token":"00aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":14,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":15,"opponents":[{"token":"00aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":16,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":17,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":18,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":19,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":20,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":21,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":22,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":23,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":24,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":25,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":26,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":27,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":28,"opponents":[{"token":"00aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":29,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":30,"opponents":[{"token":"00aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":31,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":32,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":33,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":34,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":35,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":36,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":37,"opponents":[{"token":"00aC3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":38,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":39,"opponents":[{"token":"00aD3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":40,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":41,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":42,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":43,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":44,"opponents":[{"token":"00aC3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":45,"opponents":[{"token":"00aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":46,"opponents":[{"token":"00aD3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":47,"opponents":[{"token":"00aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0}],"legs":2,"nrParticipants":16,"nrGroups":4,"thirdPlaceMatch":true,"name":"Group Stage","stageType":"GROUP","order":0}],"status":"running","type":"offline","locations":[{"id":-1,"name":"0"}]};

    expect(JSON.stringify(tournament))
        .toEqual(JSON.stringify(result));
  });

  it('should create a group stage with 2 groups and 2 locations', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 2,    
        nrParticipants: 8,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 2;
  
    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, true);
    let result = {"id":0,"name":"Test tournament","stageConfigs":[{"id":0,"matches":[{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":0,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":0,"round":0,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":1,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":1,"round":1,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":2,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":0,"round":2,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":3,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":1,"round":3,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":4,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":0,"round":4,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":5,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":1,"round":5,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0}],"legs":1,"nrParticipants":8,"nrGroups":2,"thirdPlaceMatch":true,"name":"Group Stage","stageType":"GROUP","order":0}],"status":"running","type":"offline","locations":[{"id":-1,"name":"0"},{"id":-1,"name":"1"}]};

    expect(JSON.stringify(tournament))
        .toEqual(JSON.stringify(result));
  });

  it('should create a group stage with 3 groups, 8 participants and 2 locations', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 3,    
        nrParticipants: 8,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 2;
  
    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, true);
    let result = {"id":0,"name":"Test tournament","stageConfigs":[{"id":0,"matches":[{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":0,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":4,"location":null,"bracket":0,"round":0,"opponents":[{"token":"empty","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":1,"round":0,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":4,"location":null,"bracket":1,"round":0,"opponents":[{"token":"empty","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":1,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":4,"location":null,"bracket":1,"round":1,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"empty","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":2,"round":1,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":4,"location":null,"bracket":0,"round":1,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"empty","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":2,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":4,"location":null,"bracket":1,"round":2,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"empty","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"1"},"bracket":1,"round":2,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":4,"location":null,"bracket":0,"round":3,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"empty","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":3,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0}],"legs":1,"nrParticipants":8,"nrGroups":3,"thirdPlaceMatch":true,"name":"Group Stage","stageType":"GROUP","order":0}],"status":"running","type":"offline","locations":[{"id":-1,"name":"0"},{"id":-1,"name":"1"}]};

    expect(JSON.stringify(tournament))
        .toEqual(JSON.stringify(result));
  });

  it('should create a group and single elimination stage with 4->4 1 leg', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 4,    
        nrParticipants: 16,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      },
      {
        nrGroups: 4,    
        nrParticipants: 8,
        stageType: "SINGLE_ELIMINATION",
        legs: 1,
        thirdPlaceMatch: true
      }
    ]; 
    let nrLocations = 1;
  
    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, true);
    let result = {"id":0,"name":"Test tournament","stageConfigs":[{"id":0,"matches":[{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":0,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":1,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":2,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":3,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":4,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":5,"opponents":[{"token":"00aC3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":6,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":7,"opponents":[{"token":"00aD3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":8,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":9,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":10,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":11,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":12,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":13,"opponents":[{"token":"00aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":14,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":15,"opponents":[{"token":"00aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":16,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":17,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":18,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":19,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":20,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":21,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":22,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":23,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0}],"legs":1,"nrParticipants":16,"nrGroups":4,"thirdPlaceMatch":true,"name":"Group Stage","stageType":"GROUP","order":0},{"id":1,"matches":[{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":24,"opponents":[{"token":"10aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":25,"opponents":[{"token":"10aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":26,"opponents":[{"token":"10aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":27,"opponents":[{"token":"10aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":28,"opponents":[{"token":"11aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"11aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":1},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":29,"opponents":[{"token":"11aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"11aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":1},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":30,"opponents":[{"token":"12aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"12aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":2},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":31,"opponents":[{"token":"13aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"13aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":3}],"legs":1,"nrParticipants":8,"nrGroups":4,"thirdPlaceMatch":true,"name":"Elimination Stage","stageType":"SINGLE_ELIMINATION","order":1}],"status":"running","type":"offline","locations":[{"id":-1,"name":"0"}]};

    expect(JSON.stringify(tournament))
        .toEqual(JSON.stringify(result));
  });

  it('should create a group and single elimination stage with 4->4 2 legs', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 4,    
        nrParticipants: 16,
        stageType: "GROUP",
        legs: 2,
        thirdPlaceMatch: true
      },
      {
        nrGroups: 4,    
        nrParticipants: 8,
        stageType: "SINGLE_ELIMINATION",
        legs: 2,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 1;
  
    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, true);
    let result = {"id":0,"name":"Test tournament","stageConfigs":[{"id":0,"matches":[{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":0,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":1,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":2,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":3,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":4,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":5,"opponents":[{"token":"00aC3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":6,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":7,"opponents":[{"token":"00aD3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":8,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":9,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":10,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":11,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":12,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":13,"opponents":[{"token":"00aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":14,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":15,"opponents":[{"token":"00aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":16,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":17,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":18,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":19,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":20,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":21,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":22,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":23,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":24,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":25,"opponents":[{"token":"00aA2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":26,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":27,"opponents":[{"token":"00aB2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":28,"opponents":[{"token":"00aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":29,"opponents":[{"token":"00aC2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":30,"opponents":[{"token":"00aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":31,"opponents":[{"token":"00aD2","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD3","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":32,"opponents":[{"token":"00aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":33,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":34,"opponents":[{"token":"00aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":35,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":36,"opponents":[{"token":"00aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":37,"opponents":[{"token":"00aC3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":38,"opponents":[{"token":"00aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":39,"opponents":[{"token":"00aD3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":40,"opponents":[{"token":"00aA3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":41,"opponents":[{"token":"00aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aA2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":42,"opponents":[{"token":"00aB3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":43,"opponents":[{"token":"00aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aB2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":44,"opponents":[{"token":"00aC3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":45,"opponents":[{"token":"00aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aC2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":46,"opponents":[{"token":"00aD3","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":47,"opponents":[{"token":"00aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"00aD2","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0}],"legs":2,"nrParticipants":16,"nrGroups":4,"thirdPlaceMatch":true,"name":"Group Stage","stageType":"GROUP","order":0},{"id":1,"matches":[{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":48,"opponents":[{"token":"10aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":49,"opponents":[{"token":"10aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":50,"opponents":[{"token":"10aC0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aC1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":51,"opponents":[{"token":"10aD0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aD1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":52,"opponents":[{"token":"10aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":53,"opponents":[{"token":"10aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":2,"round":54,"opponents":[{"token":"10aC1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aC0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":3,"round":55,"opponents":[{"token":"10aD1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"10aD0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":0},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":56,"opponents":[{"token":"11aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"11aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":1},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":57,"opponents":[{"token":"11aB0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"11aB1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":1},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":58,"opponents":[{"token":"11aA1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"11aA0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":1},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":1,"round":59,"opponents":[{"token":"11aB1","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"11aB0","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":1,"phase":1},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":60,"opponents":[{"token":"12aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"12aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":2},{"id":-1,"stage":null,"status":0,"location":{"id":-1,"name":"0"},"bracket":0,"round":61,"opponents":[{"token":"13aA0","score":0,"advantage":1,"user":null,"team":null,"resultApprovedTimestamp":null},{"token":"13aA1","score":0,"advantage":0,"user":null,"team":null,"resultApprovedTimestamp":null}],"leg":0,"phase":3}],"legs":1,"nrParticipants":8,"nrGroups":4,"thirdPlaceMatch":true,"name":"Elimination Stage","stageType":"SINGLE_ELIMINATION","order":1}],"status":"running","type":"offline","locations":[{"id":-1,"name":"0"}]};

    expect(JSON.stringify(tournament))
        .toEqual(JSON.stringify(result));
  });

  it('should create group stages and check if nrParticipants correct', () => { 
    let nrParticipantsCorrect = true;
    for (let nrParticipants=2; nrParticipants<16; nrParticipants++) {
      let stage=[{
        nrGroups: 1,
        nrParticipants: nrParticipants,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      }];
      let nrLocations = 1;
      let tournament = TestHelperFunctions.buildTournament(stage, nrLocations, true);

      nrParticipantsCorrect = TestHelperFunctions.checkNrParticipantsCorrect(tournament);
      if (!nrParticipantsCorrect) break;
    }
    expect(nrParticipantsCorrect).toBeTruthy();
  });

  it('should create single elimination stages and check if nrParticipants in phase0 is correct', () => { 
    let nrParticipantsCorrect = true;
    for (let nrParticipants=1; nrParticipants<16; nrParticipants++) {
      let stage=[{
        nrGroups: 1,
        nrParticipants: nrParticipants,
        stageType: "SINGLE_ELIMINATION",
        legs: 1,
        thirdPlaceMatch: true
      }];
      let nrLocations = 1;
      let tournament = TestHelperFunctions.buildTournament(stage, nrLocations, true);

      nrParticipantsCorrect = TestHelperFunctions.checkNrParticipantsCorrect(tournament);
      if (!nrParticipantsCorrect) break;
    }
    expect(nrParticipantsCorrect).toBeTruthy();
  });

  it('should create a group stage with 3 groups, 16 participants and 2 locations where every participant is only once per round', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 3,    
        nrParticipants: 16,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 2;

    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, true);
    expect(TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
  });

  it('should create a group stages with 4 groups, 16 participants and 2 locations where every participant is only once per round', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 4,    
        nrParticipants: 16,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 2;

    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, false);
    expect(TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
  });

  it('should create a group stages with 4 groups, 16 participants and 3 locations where every participant is only once per round', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 4,    
        nrParticipants: 16,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 3;
  
    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, false);
    expect(TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
  });

  it('should create a group stages with 4 groups, 16 participants and 4 locations where every participant is only once per round', () => { 
    let stages: stageParams[] = [
      {
        nrGroups: 4,    
        nrParticipants: 16,
        stageType: "GROUP",
        legs: 1,
        thirdPlaceMatch: true
      }
    ];
    let nrLocations = 4;
  
    let tournament = TestHelperFunctions.buildTournament(stages, nrLocations, false);
    expect(TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
  });
});