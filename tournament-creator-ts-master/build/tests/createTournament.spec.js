"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const helperFunctions_spec_1 = require("./helperFunctions.spec");
describe('TournamentCreator', () => {
    it('should create a group stage with 4 groups and 2 legs', () => {
        let stages = [
            {
                nrGroups: 4,
                nrParticipants: 16,
                stageType: "GROUP",
                legs: 2,
                nrLocations: 1,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, true);
        let result = { "id": 0, "name": "Test tournament", "stageConfigs": [{ "id": 0, "matches": [{ "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 0, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 1, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 2, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 3, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 4, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 5, "opponents": [{ "token": "00aC3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 6, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 7, "opponents": [{ "token": "00aD3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 8, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 9, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 10, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 11, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 12, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 13, "opponents": [{ "token": "00aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 14, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 15, "opponents": [{ "token": "00aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 16, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 17, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 18, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 19, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 20, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 21, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 22, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 23, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 24, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 25, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 26, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 27, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 28, "opponents": [{ "token": "00aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 29, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 30, "opponents": [{ "token": "00aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 31, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 32, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 33, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 34, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 35, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 36, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 37, "opponents": [{ "token": "00aC3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 38, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 39, "opponents": [{ "token": "00aD3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 40, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 41, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 42, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 43, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 44, "opponents": [{ "token": "00aC3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 45, "opponents": [{ "token": "00aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 46, "opponents": [{ "token": "00aD3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 47, "opponents": [{ "token": "00aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }], "legs": 2, "nrLocations": 1, "nrParticipants": 16, "nrGroups": 4, "thirdPlaceMatch": true, "name": "Group Stage", "stageType": "GROUP", "order": 0, "error": {} }], "status": "running" };
        expect(JSON.stringify(tournament))
            .toEqual(JSON.stringify(result));
    });
    it('should create a group stage with 2 groups and 2 locations', () => {
        let stages = [
            {
                nrGroups: 2,
                nrParticipants: 8,
                stageType: "GROUP",
                legs: 1,
                nrLocations: 2,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, true);
        let result = { "id": 0, "name": "Test tournament", "stageConfigs": [{ "id": 0, "matches": [{ "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 0, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 0, "round": 0, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 1, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 1, "round": 1, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 2, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 0, "round": 2, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 3, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 1, "round": 3, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 4, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 0, "round": 4, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 5, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 1, "round": 5, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }], "legs": 1, "nrLocations": 2, "nrParticipants": 8, "nrGroups": 2, "thirdPlaceMatch": true, "name": "Group Stage", "stageType": "GROUP", "order": 0, "error": {} }], "status": "running" };
        expect(JSON.stringify(tournament))
            .toEqual(JSON.stringify(result));
    });
    it('should create a group stage with 3 groups, 8 participants and 2 locations', () => {
        let stages = [
            {
                nrGroups: 3,
                nrParticipants: 8,
                stageType: "GROUP",
                legs: 1,
                nrLocations: 2,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, true);
        let result = { "id": 0, "name": "Test tournament", "stageConfigs": [{ "id": 0, "matches": [{ "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 0, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 4, "location": -1, "bracket": 0, "round": 0, "opponents": [{ "token": "empty", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 1, "round": 0, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 4, "location": -1, "bracket": 1, "round": 0, "opponents": [{ "token": "empty", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 1, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 4, "location": -1, "bracket": 1, "round": 1, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "empty", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 2, "round": 1, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 4, "location": -1, "bracket": 0, "round": 1, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "empty", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 2, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 4, "location": -1, "bracket": 1, "round": 2, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "empty", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 1, "bracket": 1, "round": 2, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 4, "location": -1, "bracket": 0, "round": 3, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "empty", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 3, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }], "legs": 1, "nrLocations": 2, "nrParticipants": 8, "nrGroups": 3, "thirdPlaceMatch": true, "name": "Group Stage", "stageType": "GROUP", "order": 0, "error": {} }], "status": "running" };
        expect(JSON.stringify(tournament))
            .toEqual(JSON.stringify(result));
    });
    it('should create a group and single elimination stage with 4->4 1 leg', () => {
        let stages = [
            {
                nrGroups: 4,
                nrParticipants: 16,
                stageType: "GROUP",
                legs: 1,
                nrLocations: 1,
                thirdPlaceMatch: true
            },
            {
                nrGroups: 4,
                nrParticipants: 8,
                stageType: "SINGLE_ELIMINATION",
                legs: 1,
                nrLocations: 1,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, true);
        let result = { "id": 0, "name": "Test tournament", "stageConfigs": [{ "id": 0, "matches": [{ "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 0, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 1, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 2, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 3, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 4, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 5, "opponents": [{ "token": "00aC3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 6, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 7, "opponents": [{ "token": "00aD3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 8, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 9, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 10, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 11, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 12, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 13, "opponents": [{ "token": "00aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 14, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 15, "opponents": [{ "token": "00aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 16, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 17, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 18, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 19, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 20, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 21, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 22, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 23, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }], "legs": 1, "nrLocations": 1, "nrParticipants": 16, "nrGroups": 4, "thirdPlaceMatch": true, "name": "Group Stage", "stageType": "GROUP", "order": 0, "error": {} }, { "id": 1, "matches": [{ "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 0, "opponents": [{ "token": "10aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 1, "opponents": [{ "token": "10aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 2, "opponents": [{ "token": "10aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 3, "opponents": [{ "token": "10aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 4, "opponents": [{ "token": "11aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "11aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 1 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 5, "opponents": [{ "token": "11aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "11aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 1 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 7, "opponents": [{ "token": "12aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "12aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 2 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 6, "opponents": [{ "token": "13aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "13aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 3 }], "legs": 1, "nrLocations": 1, "nrParticipants": 8, "nrGroups": 4, "thirdPlaceMatch": true, "name": "Elimination Stage", "stageType": "SINGLE_ELIMINATION", "order": 1, "error": {} }], "status": "running" };
        expect(JSON.stringify(tournament))
            .toEqual(JSON.stringify(result));
    });
    it('should create a group and single elimination stage with 4->4 2 legs', () => {
        let stages = [
            {
                nrGroups: 4,
                nrParticipants: 16,
                stageType: "GROUP",
                legs: 2,
                nrLocations: 1,
                thirdPlaceMatch: true
            },
            {
                nrGroups: 4,
                nrParticipants: 8,
                stageType: "SINGLE_ELIMINATION",
                legs: 2,
                nrLocations: 1,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, true);
        let result = { "id": 0, "name": "Test tournament", "stageConfigs": [{ "id": 0, "matches": [{ "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 0, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 1, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 2, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 3, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 4, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 5, "opponents": [{ "token": "00aC3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 6, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 7, "opponents": [{ "token": "00aD3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 8, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 9, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 10, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 11, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 12, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 13, "opponents": [{ "token": "00aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 14, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 15, "opponents": [{ "token": "00aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 16, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 17, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 18, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 19, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 20, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 21, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 22, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 23, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 24, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 25, "opponents": [{ "token": "00aA2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 26, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 27, "opponents": [{ "token": "00aB2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 28, "opponents": [{ "token": "00aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 29, "opponents": [{ "token": "00aC2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 30, "opponents": [{ "token": "00aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 31, "opponents": [{ "token": "00aD2", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD3", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 32, "opponents": [{ "token": "00aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 33, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 34, "opponents": [{ "token": "00aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 35, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 36, "opponents": [{ "token": "00aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 37, "opponents": [{ "token": "00aC3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 38, "opponents": [{ "token": "00aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 39, "opponents": [{ "token": "00aD3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 40, "opponents": [{ "token": "00aA3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 41, "opponents": [{ "token": "00aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aA2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 42, "opponents": [{ "token": "00aB3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 43, "opponents": [{ "token": "00aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aB2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 44, "opponents": [{ "token": "00aC3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 45, "opponents": [{ "token": "00aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aC2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 46, "opponents": [{ "token": "00aD3", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 47, "opponents": [{ "token": "00aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "00aD2", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }], "legs": 2, "nrLocations": 1, "nrParticipants": 16, "nrGroups": 4, "thirdPlaceMatch": true, "name": "Group Stage", "stageType": "GROUP", "order": 0, "error": {} }, { "id": 1, "matches": [{ "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 0, "opponents": [{ "token": "10aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 1, "opponents": [{ "token": "10aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 2, "opponents": [{ "token": "10aC0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aC1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 3, "opponents": [{ "token": "10aD0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aD1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 4, "opponents": [{ "token": "10aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 5, "opponents": [{ "token": "10aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 2, "round": 6, "opponents": [{ "token": "10aC1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aC0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 3, "round": 7, "opponents": [{ "token": "10aD1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "10aD0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 0 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 8, "opponents": [{ "token": "11aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "11aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 1 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 9, "opponents": [{ "token": "11aB0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "11aB1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 1 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 10, "opponents": [{ "token": "11aA1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "11aA0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 1 }, { "stage": null, "status": 0, "location": 0, "bracket": 1, "round": 11, "opponents": [{ "token": "11aB1", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "11aB0", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 1, "phase": 1 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 13, "opponents": [{ "token": "12aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "12aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 2 }, { "stage": null, "status": 0, "location": 0, "bracket": 0, "round": 12, "opponents": [{ "token": "13aA0", "score": 0, "advantage": 1, "user": null, "resultApprovedTimestamp": 0 }, { "token": "13aA1", "score": 0, "advantage": 0, "user": null, "resultApprovedTimestamp": 0 }], "leg": 0, "phase": 3 }], "legs": 1, "nrLocations": 1, "nrParticipants": 8, "nrGroups": 4, "thirdPlaceMatch": true, "name": "Elimination Stage", "stageType": "SINGLE_ELIMINATION", "order": 1, "error": {} }], "status": "running" };
        expect(JSON.stringify(tournament))
            .toEqual(JSON.stringify(result));
    });
    it('should create group stages and check if nrParticipants correct', () => {
        let nrParticipantsCorrect = true;
        for (let nrParticipants = 2; nrParticipants < 16; nrParticipants++) {
            let stage = [{
                    nrGroups: 1,
                    nrParticipants: nrParticipants,
                    stageType: "GROUP",
                    legs: 1,
                    nrLocations: 1,
                    thirdPlaceMatch: true
                }];
            let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stage, true);
            nrParticipantsCorrect = helperFunctions_spec_1.TestHelperFunctions.checkNrParticipantsCorrect(tournament);
            if (!nrParticipantsCorrect)
                break;
        }
        expect(nrParticipantsCorrect).toBeTruthy();
    });
    it('should create single elimination stages and check if nrParticipants in phase0 is correct', () => {
        let nrParticipantsCorrect = true;
        for (let nrParticipants = 1; nrParticipants < 16; nrParticipants++) {
            let stage = [{
                    nrGroups: 1,
                    nrParticipants: nrParticipants,
                    stageType: "SINGLE_ELIMINATION",
                    legs: 1,
                    nrLocations: 1,
                    thirdPlaceMatch: true
                }];
            let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stage, true);
            nrParticipantsCorrect = helperFunctions_spec_1.TestHelperFunctions.checkNrParticipantsCorrect(tournament);
            if (!nrParticipantsCorrect)
                break;
        }
        expect(nrParticipantsCorrect).toBeTruthy();
    });
    it('should create a group stage with 3 groups, 16 participants and 2 locations where every participant is only once per round', () => {
        let stages = [
            {
                nrGroups: 3,
                nrParticipants: 16,
                stageType: "GROUP",
                legs: 1,
                nrLocations: 2,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, true);
        expect(helperFunctions_spec_1.TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
    });
    it('should create a group stages with 4 groups, 16 participants and 2 locations where every participant is only once per round', () => {
        let stages = [
            {
                nrGroups: 4,
                nrParticipants: 16,
                stageType: "GROUP",
                legs: 1,
                nrLocations: 2,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, false);
        expect(helperFunctions_spec_1.TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
    });
    it('should create a group stages with 4 groups, 16 participants and 3 locations where every participant is only once per round', () => {
        let stages = [
            {
                nrGroups: 4,
                nrParticipants: 16,
                stageType: "GROUP",
                legs: 1,
                nrLocations: 3,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, false);
        expect(helperFunctions_spec_1.TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
    });
    it('should create a group stages with 4 groups, 16 participants and 4 locations where every participant is only once per round', () => {
        let stages = [
            {
                nrGroups: 4,
                nrParticipants: 16,
                stageType: "GROUP",
                legs: 1,
                nrLocations: 4,
                thirdPlaceMatch: true
            }
        ];
        let tournament = helperFunctions_spec_1.TestHelperFunctions.buildTournament(stages, false);
        expect(helperFunctions_spec_1.TestHelperFunctions.checkTokensOnlyOncePerRound(tournament)).toBeTruthy();
    });
});
//# sourceMappingURL=createTournament.spec.js.map